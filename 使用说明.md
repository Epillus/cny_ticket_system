# 学校春晚票务系统使用说明

## 系统状态
✅ 系统已成功启动并运行在 HTTPS 模式下

## 服务器信息
- 本地访问地址: https://localhost:5001
- 网络访问地址: https://192.168.31.167:5001
- 端口: 5001
- SSL证书: 自签名证书已配置

## 主要功能

### 1. 手机扫码端
**访问地址**: https://192.168.31.167:5001/scan

**使用步骤**:
1. 用手机打开上述链接（确保手机和电脑在同一个WiFi网络）
2. 点击"开始扫描"按钮
3. iOS设备会提示"无法验证服务器身份"，请点击"继续"
4. 再次点击"开始扫描"，允许访问摄像头
5. 将摄像头对准票上的二维码进行扫描
6. 扫描成功后，手机上会显示票持有者的名字
7. 扫描结果会自动同步到电脑端

**注意事项**:
- 必须使用HTTPS连接才能访问摄像头
- 首次使用需要信任自签名SSL证书
- iOS设备需要点击"继续"来信任证书

### 2. 电脑管理端
**访问地址**: https://localhost:5001/admin 或 https://192.168.31.167:5001/admin

**功能**:
- 实时显示所有票务信息
- 查看已检票和未检票的人员名单
- 导出当天所有来的人员名单

**操作**:
1. 打开上述链接
2. 点击"导出当天来的所有人"按钮
3. 系统会在 `data/` 目录下生成一个以当天日期命名的CSV文件

### 3. 首页
**访问地址**: https://localhost:5001 或 https://192.168.31.167:5001

**功能**:
- 系统介绍
- 快速导航到各功能模块

## 数据文件
- `data/tickets.csv`: 所有票务信息（包含未检票和已检票）
- `data/checked_tickets.csv`: 已检票的人员名单
- `data/today_attendees_YYYY-MM-DD.csv`: 当天来的人员名单（导出时生成）

## 故障排除

### 1. 手机无法找到服务器
- 确保手机和电脑在同一个WiFi网络
- 检查网络IP地址是否正确（当前为192.168.31.167）
- 尝试关闭电脑防火墙或添加端口5001到白名单

### 2. 手机无法访问摄像头
- 确保使用HTTPS连接（URL以https开头）
- 确保已信任SSL证书
- iOS设备需要点击"允许访问摄像头"

### 3. 扫描后无反应
- 确保二维码清晰可见
- 检查票号是否在系统中存在
- 检查手机和电脑的网络连接

## 系统重启
如果系统出现问题，可以按照以下步骤重启：
1. 打开命令提示符
2. 进入 `C:\Users\guanl\Desktop\ticket_system` 目录
3. 运行命令：`taskkill /F /IM python.exe`
4. 重新运行：`python app.py`

## 技术支持
如果遇到其他问题，请检查系统日志或联系技术人员。
